#!/usr/bin/env python
# -*- coding: utf-8 -*-

# In order to avoid having a terminal window opened each time
# it's launched by better touch tool:
# osascript -e 'do shell script "~/bin/focus-ipython"'

# If launched as terminal command in BTT:
# bash -l -c "~/bin/osx/focus ipython"

import appscript
import commands
import sys

if len(sys.argv) != 2:
    print "Usage: focus program"

program = sys.argv[1]

if program == 'ipython':
    cmd = 'ps aux | grep qtconsole | grep -v zmq'
elif program == 'macvim':
    cmd = 'ps aux | grep macvim | grep "MMNoWindow"'
else:
    cmd = 'ps aux | grep %s' % program

cmd = cmd + ' | grep -v grep | grep -v focus'
proc = commands.getoutput(cmd)
if proc:
    pid = proc.split()[1]
    appscript.app(pid=int(pid)).activate()
