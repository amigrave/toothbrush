# vim:filetype=sh syntax=sh:fdm=marker:

# Manually provide config file {{{
# TODO: put this in $AMIGRAVE/bin so it's not confined to shells
alias mocp="mocp -M $DOTFILES/moc"
alias irssi="irssi --home=$DOTFILES/irssi"
alias tmux="tmux -f $DOTFILES/tmux/tmux.conf"
alias flake8="flake8 --config=$DOTFILES/flake8"
# }}}

# Application shadowers {{{
alias vim='vim -p '
alias qmv='qmv --format=destination-only'
alias ag="ag --page=less"
alias agp="ag --page=less --ignore=node_modules --ignore=migrations --ignore='*min.js' -S" # ag for projects
alias ags="agp -l --stats"
alias ack="ack --pager=less --color-match=red"
alias cdiff='cdiff -s'
alias cal='ncal -bM'
alias pip='pip --log /dev/null'
alias invoke='PYTHONDONTWRITEBYTECODE=1 invoke'
# }}}

# Application shortcuts {{{
alias i="ipython"

alias dk='sudo docker'
alias dkb='sudo docker build --force-rm=true --no-cache=true'
alias npml='npm list --depth=0'
alias tm="export SHELL=$AMIGRAVE/bin/shell; tmux attach || tmux || screen -rx || screen"
alias s='screen -rx || screen -RdU'
alias mp3="find . -iname \*.mp3 | mpg123 -z -@ - -b 4096"
alias mpi="mp3info -x -F -r a"
alias adlib='adplay -r -b 8192'
alias f="find . | egrep -i"
alias ff="find . -type d | egrep -i"
alias v='DISPLAY=:0 mpv -cache 4096 -fs'
# }}}

# Path naviguation {{{
alias ls="ls --color=yes"
alias d="LC_ALL=C ls -lh"
alias l="LC_ALL=C ls -lAh | less -r -E -X"
alias ll=l
# }}}

# Misc {{{
alias please='sudo -E $(fc -ln -1)'
alias src='source-highlight --out-format=esc -o STDOUT'
alias C='LANG=C'
alias lower='for i in *; do mv "$i" "$(echo $i | tr "[A-Z]" "[a-z]" )"; done'
alias upper='for i in *; do mv "$i" "$(echo $i | tr "[a-z]" "[A-Z]" )"; done'
alias chmodx="find . -type d -exec chmod 0755 '{}' ';'; find . -type f -exec chmod 0644 '{}' ';'"
alias chownx="sudo chown -R $USER:$(id -g -n $USER)"
alias dusage="du -sk * | sort -nr | cut -f2 | xargs -d '\n' du -sh"
alias pst="pstree -hanUul $USER | less"
# Make a function out of this or even consider to put it in agr.py
# alias setdate="sudo date -s \"$(curl -sD - google.com | grep ^Date: | cut -d' ' -f3-6)Z\""

alias vbox_reload="killall VBoxClient; VBoxClient-all"
alias git-force-ignore='git update-index --assume-unchanged'
alias svnupdry='svn merge --dry-run -r BASE:HEAD .'
alias bfg='java -jar ~/bin/java/bfg*'

alias ssh-nokey="ssh -o PreferredAuthentications=keyboard-interactive,password -o PubkeyAuthentication=no"

alias winrsync='rsync -rltDvu --modify-window=1 --progress'
alias python_dependencies='sfood -fuq . | sfood-filter-stdlib | sfood-target-files | xargs dirname | sort | uniq'
alias webserve='python -m SimpleHTTPServer'
alias ftpserve='python -m pyftpdlib'
alias vlc_stream='vlc -vvv --sout udp:239.0.0.1 --no-sout-display --sout-keep --ttl 4'
alias termtest="echo -e \"\e[38;5;196mred\e[38;5;46mgreen\e[38;5;21mblue\e[0m\""
alias termkey='tput smkx; cat; tput rmkx'
alias euro="echo -e \\0342\\0202\\0254"   # Used to check UTF8 in term
# }}}

# Emulation {{{
alias sdl1="SDL_VIDEO_FULLSCREEN_HEAD=1 "
alias db='dosbox -c "MOUNT C . -freesize 1024" -c "c:"'
alias dbox="dosbox -conf $DOTFILES/local/bin/bin-Dos-i386/dosbox.conf ."
alias dboxcd="dosbox -conf ~/local/bin/bin-Dos-i386/dosbox_cd.conf ."
alias msx="mess msx -cart1 \`iselect -a *\`"
alias ami='files=(*.adf); amiga -0 "${files[0]}" -1 "${files[1]}" -2 "${files[2]}" -3 "${files[3]}"'
# }}}

# Linux aliases {{{
if [[ "$OSTYPE" == "linux" || "$OSTYPE" == "linux-gnu" ]]; then

alias e="gvim-agr --remote-tab-silent"
alias g="gimp-agr"
alias ack="ack-grep --pager=less --color-match=red"
alias burniso='wodim dev=/dev/scd0 driveropts=burnfree,noforcespeed fs=14M speed=16 -dao -eject -overburn -v'
alias drop_cache='sync; echo 3 > /proc/sys/vm/drop_caches'
# alias man="TERMINFO=$HOME/.terminfo/ LESS=C TERM=mostlike PAGER=less man"
alias kid="kid3-qt ."
alias o="xdg-open"
alias qmv='qmv -f do'
alias track='inotifywait -rm . | grep -iE "(modify |create |delete|attrib|moved)"'
alias tsys="tail -f /var/log/dmesg /var/log/messages"
alias ubuntuwin="gconftool-2 --set /apps/metacity/general/button_layout --type string menu:minimize,maximize,close"
alias vboxusb="sudo chown -R amigrave:vboxusers /proc/bus/usb"
alias vir='clamscan -r *'
alias virtualization='egrep "^flags.*(vmx|svm)" /proc/cpuinfo' # check for virtualization instructions
alias zsnes_gamepad="sudo ln -s /dev/input/js0 /dev/js0"

fi
# }}}

# OSX aliases {{{
if [[ "$OSTYPE" =~ darwin* ]]; then

alias vim="mvim -v"
alias e="mvim --remote-tab-silent"

alias htop="HOMERC=$XDG_CONFIG_HOME/htop/htoprc htop"  # will soon change: https://github.com/max-horvath/htop-osx/pull/11
alias jsc="/System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Resources/jsc"
alias jjs="rlwrap /Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/bin/jjs"
alias kid3="/Applications/kid3.app/Contents/MacOS/kid3 ."
alias xee="/Applications/Xee.app/Contents/MacOS/Xee"
alias safari="/Applications/Safari.app/Contents/MacOS/Safari"
alias google-chrome="/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome"
alias google-chrome-canary="/Applications/Google\ Chrome\ Canary.app/Contents/MacOS/Google\ Chrome\ Canary --disable-web-security"
alias clementine="/Applications/clementine.app/Contents/MacOS/clementine"
alias gimp="/Applications/Gimp.app/Contents/MacOS/Gimp"
alias milkytracker="/Applications/MilkyTracker.app/Contents/MacOS/MilkyTracker"
alias fsuae="/Applications/FS-UAE.app/Contents/MacOS/fs-uae $DOTFILES/fs-uae/fs-uaerc"
alias pixelmator="/Applications/Pixelmator.app/Contents/MacOS/Pixelmator"
alias ggx2="cd ~/.wine/drive_c/Program\ Files/ZOO\ Digital\ Publishing/GUILTY\ GEAR\ X2\ #RELOAD/; wine ggx2.exe"
alias bitcoin="/Applications/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt -conf=$DOTFILES/bitcoin/bitcoin.conf -datadir=$XDG_CONFIG_HOME/bitcoin/ &"
alias retroarch="/Applications/RetroArch.app/Contents/MacOS/RetroArch"

fi
# }}}

# Cygwim aliases {{{
if [[ "$OSTYPE" == "cygwin" ]]; then

alias e="/cygdrive/c/PROGRA~1/Vim/vim74/gvim.exe --remote-tab-silent"
alias jsc1="/cygdrive/c/WINNT/Microsoft.NET/Framework/v1.*/jsc.exe"
alias jsc2="/cygdrive/c/WINNT/Microsoft.NET/Framework/v2.*/jsc.exe"
alias jsc3="/cygdrive/c/WINNT/Microsoft.NET/Framework/v3.*/jsc.exe"
alias jsc4="/cygdrive/c/WINNT/Microsoft.NET/Framework/v4.*/jsc.exe"

alias csc1="/cygdrive/c/WINNT/Microsoft.NET/Framework/v1.*/csc.exe"
alias csc2="/cygdrive/c/WINNT/Microsoft.NET/Framework/v2.*/csc.exe"
alias csc3="/cygdrive/c/WINNT/Microsoft.NET/Framework/v3.*/csc.exe"
alias csc4="/cygdrive/c/WINNT/Microsoft.NET/Framework/v4.*/csc.exe"

alias cyginstall='/setup.exe -q -n -N -d -R "c:\cygwin" -s "http://mirrors.kernel.org/sourceware/cygwin/" -l "c:\cygwin\tmp" -P '

fi
# }}}
