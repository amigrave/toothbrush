# vim: ft=sh:fdm=marker:
# Non interactive profile


# Global environment {{{

# TODO: find a way to make it dynamic
# export DOTFILES=$HOME/amigrave
# current_dir=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
# export DOTFILES=$( dirname "$current_dir" )
export AMIGRAVE=$HOME/amigrave
export DOTFILES=$AMIGRAVE/dotfiles
export LANG=en_US.UTF-8
export LC_ALL=$LANG
export LC_CTYPE=$LANG
export LC_COLLATE=C

# Applicatons
export EDITOR=vim
export VISUAL=vim
export TERMINAL=terminator
export BROWSER=google-chrome

export VIMINIT='let $MYVIMRC="$DOTFILES/vim/vimrc" | source $MYVIMRC'
export LESS="--no-init --ignore-case --LONG-PROMPT --silent --tabs=4 -R -F"
export LS_OPTIONS='--color=auto'
export GREP_OPTIONS='--color=auto'

# https://gist.github.com/cjbarnes18/4078704
# enable this for non-reparenting window managers
export _JAVA_AWT_WM_NONREPARENTING=1

# Set up paths
PATH=$AMIGRAVE/bin:$PATH
if [ -d "$HOME/bin" ]; then
    PATH=$HOME/bin:$PATH
fi
if [ -d "$HOME/.local/bin" ]; then
    PATH=$HOME/.local/bin:$PATH
fi
if [ -f "$HOME/.local/lib/python2.7/site-packages/" ]; then
    # TODO: python version !!!
    export PYTHONPATH=$HOME/.local/lib/python2.7/site-packages:$PYTHONPATH
fi

export XDG_CONFIG_DIRS=$DOTFILES:$XDG_CONFIG_DIRS
export XDG_CONFIG_HOME=$HOME/.config
export XDG_CACHE_HOME=$HOME/.cache
mkdir -p $XDG_CONFIG_HOME

export ZDOTDIR=$DOTFILES/zsh
export MPLAYER_HOME=$DOTFILES/mplayer
export MPV_HOME=$DOTFILES/mpv
export IPYTHONDIR=$DOTFILES/ipython
export INPUTRC=$DOTFILES/inputrc
export SCREENRC=$DOTFILES/screenrc
export IRBRC=$DOTFILES/irbrc
export LFTP_HOME=$DOTFILES/lftp
export MPV_HOME=$DOTFILES/mpv
export HTTPIE_CONFIG_DIR=$DOTFILES/httpie
export PSQLRC=$DOTFILES/psqlrc
export WGETRC=$DOTFILES/wgetrc
export GIMP2_DIRECTORY="$XDG_CONFIG_HOME/gimp"

export DVDCSS_CACHE=$XDG_CACHE_HOME/dvdcss/
export LESSHISTFILE=$XDG_CACHE_HOME/less_history
export ERRFILE=$XDG_CACHE_HOME/xsession-errors.log
export BZR_LOG=/dev/null
# }}}

# Bash startup {{{
#if [ -n "$BASH_VERSION" ]; then
#    source $DOTFILES/bash/bashrc
#fi
# }}}

# Homebrew {{{
if [ -d "/usr/local/Cellar/coreutils" ]; then
    # TODO: check if still necessary on OSX
    PATH="/usr/local/bin:$PATH"
    export PYTHONPATH=/usr/local/lib/python:$PYTHONPATH
fi
# }}}

# Node {{{
if [ -d "/usr/local/lib/node_modules" ]; then
    NODE_PATH="/usr/local/lib/node_modules"
fi
# }}}

# Load local profile
if [ -f "$XDG_CONFIG_HOME/profile_local" ]; then
    . $XDG_CONFIG_HOME/profile_local
fi
