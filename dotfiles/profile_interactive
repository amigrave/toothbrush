# vim: ft=sh:fdm=marker:
# Interactive profile shared amongst all shells

source $DOTFILES/aliases
eval `dircolors -b $DOTFILES/dir_colors `

# Functions {{{
function is_ssh() {
    # TODO: better ssh detection
    if [ -z "$SSH_TTY" ]; then
        return 1
    fi
    return 0
}
# }}}

# Set up terminal emulation {{{
if [[ "$COLORTERM" == "rxvt-xpm" ]]; then
    export TERM="rxvt-256color"
elif [[ "$COLORTERM" == "gnome-terminal" ]]; then
    # TODO: check issues with S-F* keys
    # export TERM="gnome-256color"
    export TERM="xterm-256color"
elif [[ "$TERM" == "screen" ]]; then
    export TERM="screen-256color"
elif [[ "$TERM" == "screen-bce" ]]; then
    export TERM="screen-256color-bce-s"
elif [[ "$KONSOLE_DBUS_SESSION" != "" ]]; then
    export TERM="konsole-256color"
fi
# }}}

# TODO: src-highlight {{{
# LESSPIPE=`which src-hilite-lesspipe.sh`
# alias src='LESSOPEN="| ${LESSPIPE} %s" less'
# }}}

# OS dependencies {{{
if [[ "$OSTYPE" == "linux" || "$OSTYPE" == "linux-gnu" ]]; then

    # Use xbindkeys if installed
    if [ -x "$(command -v xbindkeys)" ]; then
        xbindkeys -f $DOTFILES/xbindkeysrc
    fi

    # make less more friendly for non-text input files, see lesspipe(1)
    [ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

    # SDL Fullscreen second monitor
    # export SDL_VIDEO_FULLSCREEN_HEAD=1
    # export SDL_AUDIODRIVER=alsa
elif [[ "$OSTYPE" == "cygwin" ]]; then

    termsetcolors

elif [[ "$OSTYPE" =~ darwin* ]]; then

    export BROWSER=safari

fi
# }}}
